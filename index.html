<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    
</head>
<body>
	<h1> Final project </h1>
	<svg width="960" height="500"></svg>
	<script>	
		var svg = d3.select("svg"),
		    margin = {top: 20, right: 20, bottom: 30, left: 50},
		    width = svg.attr("width") - margin.left - margin.right,
		    height = svg.attr("height") - margin.top - margin.bottom;
		
		var parseDate = d3.timeParse("%m/%d/%Y");
		var formatTime = d3.timeFormat("%Y");
		
		var x = d3.scaleTime().range([0, width]),
		    y = d3.scaleLinear().range([height, 0]),
		    z = d3.scaleOrdinal(d3.schemeCategory10);
		
		var stack = d3.stack();
		
		var area = d3.area()
		    .x(function(d, i) { return x(d.data.date); })
		    .y0(function(d) { return y(d[0]); })
		    .y1(function(d) { return y(d[1]); });
		
		var g = svg.append("g")
		    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		
		
		
	    d3.csv("https://tspeng.github.io/Final-Project/data/Accidental_Drug_Related_Deaths_2012-2017.csv", function(data) {
		    data.forEach(function(d){
			    d.Date = parseDate(d.Date);
		    });
		    
			var yearCount = d3.nest()
			  	.key(function(d) { return formatTime(d.Date); })
			  	.rollup(function(v) { return v.length; })
			  	.entries(data);
			
			console.log(yearCount);
			console.log(data[0].Date);
			console.log(formatTime(data[0].Date));
			/*
		    console.log(data.length);
		    for (var i = 0; i < 1; i++) {
			    console.log(data[i].Sex);
			    console.log(data[i].Age);
			    console.log(data[i].Date);
		    }*/
		});
		
		
		
		
		
		
		
	</script>
</body>
</html>
